{
  "alias": "hvac_display",
  "name": "HVAC system diagram",
  "descriptor": {
    "type": "latest",
    "sizeX": 10,
    "sizeY": 9,
    "resources": [],
    "templateHtml": "<!-- Timestamp        -->\n<!-- 2019.09.18 17:00 -->\n<!-- draw.io to make drawing -->\n<!-- Use https://www.drawsvg.org/drawsvg.html to group and tag -->\n\n<div class = \"drawing\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" \n        xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"1281px\" height=\"761px\" viewBox=\"-0.5 -0.5 1281 761\" style=\"background-color: rgb(255, 255, 255);\">\n        <defs>\n            <linearGradient x1=\"100%\" y1=\"0%\" x2=\"0%\" y2=\"0%\" id=\"mx-gradient-ff441f-1-295bff-1-e-0\">\n                <stop offset=\"0%\" style=\"stop-color:#295BFF\"/>\n                <stop offset=\"100%\" style=\"stop-color:#FF441F\"/>\n            </linearGradient>\n            <linearGradient x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\" id=\"mx-gradient-295bff-1-ff441f-1-e-0\">\n                <stop offset=\"0%\" style=\"stop-color:#295BFF\"/>\n                <stop offset=\"100%\" style=\"stop-color:#FF441F\"/>\n            </linearGradient>\n        </defs>\n        <g >\n            <rect x=\"0\" y=\"0\" width=\"1280\" height=\"760\" fill-opacity=\"0\" fill=\"#ffffff\" stroke=\"none\" pointer-events=\"none\"/>\n            <path d=\"M 80 210 L 1180 210 L 1200 240 L 1180 270 L 80 270 L 100 240 Z\" fill=\"url(#mx-gradient-ff441f-1-295bff-1-e-0)\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 80 570 L 1180 570 L 1200 600 L 1180 630 L 80 630 L 100 600 Z\" fill=\"url(#mx-gradient-295bff-1-ff441f-1-e-0)\" stroke=\"#000000\" stroke-miterlimit=\"10\" transform=\"rotate(-180,640,600)\" pointer-events=\"none\"/>\n            <rect x=\"600\" y=\"160\" width=\"80\" height=\"520\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 600 680 L 680 160\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <rect x=\"360\" y=\"190\" width=\"40\" height=\"100\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 360 210 L 400 190\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 360 210 L 400 230\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 360 250 L 400 230\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 360 250 L 400 270\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 360 290 L 400 270\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <ellipse cx=\"900\" cy=\"240\" rx=\"40\" ry=\"40\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 880 205 L 940 240 L 880 275 Z\" fill=\"#66cc00\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <ellipse cx=\"239.5\" cy=\"600\" rx=\"40\" ry=\"40\" fill=\"#ffffff\" stroke=\"#000000\" transform=\"rotate(180,239.5,600)\" pointer-events=\"none\"/>\n            <path d=\"M 199.5 565 L 259.5 600 L 199.5 635 Z\" fill=\"#66cc00\" stroke=\"#000000\" stroke-miterlimit=\"10\" transform=\"rotate(180,229.5,600)\" pointer-events=\"none\"/>\n            <ellipse cx=\"380\" cy=\"135\" rx=\"5\" ry=\"5\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 350 210 L 350 170 L 410 170 L 410 210\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 380 170 L 380 140\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 195 570 L 195 530\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <ellipse cx=\"195\" cy=\"525\" rx=\"5\" ry=\"5\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 1005 570 L 1005 530\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <ellipse cx=\"1005\" cy=\"525\" rx=\"5\" ry=\"5\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <rect x=\"360\" y=\"550\" width=\"40\" height=\"100\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <rect x=\"480\" y=\"550\" width=\"40\" height=\"100\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <ellipse cx=\"390\" cy=\"640\" rx=\"10\" ry=\"10\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 380 640 L 400 640\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <ellipse cx=\"510\" cy=\"640\" rx=\"10\" ry=\"10\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 500 640 L 520 640\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 510 630 L 510 650\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <rect x=\"880\" y=\"550\" width=\"40\" height=\"100\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 880 570 L 920 550\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 880 570 L 920 590\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 880 610 L 920 590\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 880 610 L 920 630\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 880 650 L 920 630\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <ellipse cx=\"900\" cy=\"495\" rx=\"5\" ry=\"5\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <path d=\"M 870 570 L 870 530 L 930 530 L 930 570\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 900 530 L 900 500\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <path d=\"M 195 210 L 195 170\" fill=\"none\" stroke=\"#000000\" stroke-miterlimit=\"10\" pointer-events=\"none\"/>\n            <ellipse cx=\"195\" cy=\"165\" rx=\"5\" ry=\"5\" fill=\"#ffffff\" stroke=\"#000000\" pointer-events=\"none\"/>\n            <g transform=\"translate(1137.5,369.5)\">\n                <switch>\n                    <foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"94\" height=\"70\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\">\n                        <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 60px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 94px; white-space: nowrap; overflow-wrap: normal; text-align: center;\">\n                            <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;\">Ute</div>\n                        </div>\n                    </foreignObject>\n                    <text x=\"47\" y=\"65\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"60px\" font-family=\"Helvetica\">Ute</text>\n                </switch>\n            </g>\n            <g transform=\"translate(46.5,369.5)\">\n                <switch>\n                    <foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"116\" height=\"70\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\">\n                        <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 60px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 118px; white-space: nowrap; overflow-wrap: normal; text-align: center;\">\n                            <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;\">Inne</div>\n                        </div>\n                    </foreignObject>\n                    <text x=\"58\" y=\"65\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"60px\" font-family=\"Helvetica\">Inne</text>\n                </switch>\n            </g>\n        </g>\n    </svg>    \n</div>\n<div>\n    {{_someText}}<br>\n    IntakeAirTemperature: {{IntakeAirTemperature}}\n</div>\n",
    "templateCss": "#container {\n    overflow: auto;\n}\n\n.drawing {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.input-box-line\n{\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    display: flex; \n    align-items: center;\n    flex-direction: row; \n    flex-wrap: nowrap; \n    justify-content: flex-start; \n    align-items: center;\n    font-weight: 100;\n    \n/*    border-style: solid; */\n    border-color: black;\n}\n",
    "controllerScript": "let $scope;\n\nlet decimalChar;\n\n// De-ref function for variabel/value lookup\n// Check if the variable exists\nself.variableExists = function(tag)\n{   \n    var varName = self.ctx.settings[tag];\n    var retVal = false;\n    if (varName === undefined) varName = tag;\n\n    // Scan throug all data to find the correct variable name\n    for (i = 0; (!retVal) && (i < self.ctx.data.length); i++)\n    {\n        retVal = (self.ctx.data[i].dataKey.name === varName);\n    }\n\n    return retVal;\n}\n\n\n// De-ref function for variabel/value lookup\n// Check if the variable is referenced in the setting\n// If not in the settiongs, assume that the name can be directly used\nself.getValue = function(tag, missing)\n{   \n    var varName = self.ctx.settings[tag];\n    var retVal = missing;\n    if (varName === undefined) varName = tag;\n\n    // Scan throug all data to find the correct variable name\n    for (i = 0; i < self.ctx.data.length; i++)\n    {\n        data = self.ctx.data[i];\n        if (data.dataKey.name === varName) retVal = data.data[0][1];\n    }\n\n    return retVal;\n}\n\nself.onInit = function() {\n\n    $scope = self.ctx.$scope;\n    attributeService = $scope.$injector.get('attributeService');\n\n    decimalChar = (1.5).toLocaleString().charAt(1);\n\n// Init scope variables\n    $scope.inputEnabled = self.ctx.settings.inputEnabled;\n    $scope._someText = \"hallo\"\n    $scope.IntakeAirTemperature = \"\"\n    \n\n    $( \"mx-gradient-ff441f-1-295bff-1-e-0\" ).css( \"border\", \"3px solid red\" );\nx =     $( \"mx-gradient-ff441f-1-295bff-1-e-0\" )\nconsole.log(x)\n\n};\n\n\nself.onDataUpdated = function() \n{\n    $scope._someText = self.getValue(\"SupplyAirTemperature\", \"n/a\");\n    $scope.IntakeAirTemperature = self.variableExists(\"IntakeAirTemperature\");\n\n    x =$(\"#somethingtohide\");\n    x.css({visibility: \"hidden\"});\nconsole.log(x)\ny = $(\"hvacdrawing\")\nconsole.log(y)\n\n};\n\n\nself.onResize = function() \n{\n\n};\n\nself.typeParameters = function() {\n    return {\n        maxDatasources: 1,\n        maxDataKeys: 10\n    };\n};\n\n\nself.onDestroy = function() {};",
    "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"inputEnabled\" : {\n                \"title\" : \"Input enabled\",\n                \"type\": \"boolean\",\n                \"default\" : true\n            },\n            \"labelVisible\" : {\n                \"title\" : \"Display label\",\n                \"type\": \"boolean\",\n                \"default\" : true\n            },\n            \"scaleDynamic\" : {\n                \"title\" : \"Dynamic font scaling\",\n                \"type\": \"boolean\",\n                \"default\" : true\n            },\n            \"labelStyle\":{\n                \"title\":\"Label styling (CSS). Note: this may override dynamic scaling!\",\n                \"type\":\"string\"\n            },\n            \"valueStyle\":{\n                \"title\":\"Value styling (CSS). Note: this may override dynamic scaling!\",\n                \"type\":\"string\"\n            },\n            \"IntakeAirTemperature\":{\n                \"title\":\"Variable for IntakeAirTemperature\",\n                \"type\":\"string\"\n            },\n            \"ExhaustAirTemperature\":{\n                \"title\":\"Variable for ExhaustAirTemperature\",\n                \"type\":\"string\"\n            },\n            \"SupplyAirTemperature\":{\n                \"title\":\"Variable for SupplyAirTemperature\",\n                \"type\":\"string\"\n            },\n            \"SupplyAirFlow\":{\n                \"title\":\"Variable for SupplyAirFlow\",\n                \"type\":\"string\"\n            },\n            \"SupplyAirPressure\":{\n                \"title\":\"Variable for SupplyAirPressure\",\n                \"type\":\"string\"\n            },\n            \"SupplyAirFanLevel\":{\n                \"title\":\"Variable for SupplyAirFanLevel\",\n                \"type\":\"string\"\n            },\n            \"ExtractAirTemperature\":{\n                \"title\":\"Variable for ExtractAirTemperature\",\n                \"type\":\"string\"\n            },\n            \"ExtractAirFlow\":{\n                \"title\":\"Variable for ExtractAirFlow\",\n                \"type\":\"string\"\n            },\n            \"ExtractAirPressure\":{\n                \"title\":\"Variable for ExtractAirPressure\",\n                \"type\":\"string\"\n            },\n            \"ExtractAirFanLevel\":{\n                \"title\":\"Variable for ExtractAirFanLevel\",\n                \"type\":\"string\"\n            },\n            \"HeatCoilLevel\":{\n                \"title\":\"Variable for HeatCoilLevel\",\n                \"type\":\"string\"\n            },\n            \"CoolCoilLevel\":{\n                \"title\":\"Variable for CoolCoilLevel\",\n                \"type\":\"string\"\n            },\n            \"HeatExchangerLevel\":{\n                \"title\":\"Variable for HeatExchangerLevel\",\n                \"type\":\"string\"\n            },\n            \"RunState\":{\n                \"title\":\"Variable for RunState\",\n                \"type\":\"string\"\n            },\n            \"Alarm\":{\n                \"title\":\"Variable for Alarm\",\n                \"type\":\"string\"\n            },\n            \"OperationMode\":{\n                \"title\":\"Variable for OperationMode \",\n                \"type\":\"string\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"inputEnabled\",\n        \"labelVisible\",\n        \"scaleDynamic\",  \n        \"labelStyle\",   \n        \"valueStyle\",   \n        \"IntakeAirTemperature\",\n        \"ExhaustAirTemperature\",\n        \"SupplyAirTemperature\",\n        \"SupplyAirFlow\",\n        \"SupplyAirPressure\",\n        \"SupplyAirFanLevel\",\n        \"ExtractAirTemperature\",\n        \"ExtractAirFlow\",\n        \"ExtractAirPressure\",\n        \"ExtractAirFanLevel\",\n        \"HeatCoilLevel\",\n        \"CoolCoilLevel\",\n        \"HeatExchangerLevel\",\n        \"RunState\",\n        \"Alarm\",\n        \"OperatingMode\"\n    ]\n}",
    "dataKeySettingsSchema": "",
    "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Temp\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.2392660816082064,\"funcBody\":\"var value = prevValue + Math.random() * 40 - 20;\\nif (value < -60) {\\n\\tvalue = -60;\\n} else if (value > 60) {\\n\\tvalue = 60;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"rgba(72, 34, 255, 0.69)\",\"color\":\"rgba(255, 255, 255, 0.87)\",\"padding\":\"16px\",\"settings\":{\"labelVisible\":true,\"inputEnabled\":true,\"scaleDynamic\":true,\"SupplyAirTemperature\":\"cloudiness\"},\"title\":\"HVAC system diagram\",\"dropShadow\":true,\"enableFullscreen\":false,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"units\":\"°C\",\"decimals\":3,\"useDashboardTimewindow\":true,\"showLegend\":false,\"widgetStyle\":{},\"actions\":{},\"enableDataExport\":false,\"displayTimewindow\":true}"
  }
}